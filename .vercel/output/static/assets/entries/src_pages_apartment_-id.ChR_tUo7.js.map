{"version":3,"file":"src_pages_apartment_-id.ChR_tUo7.js","sources":["../../../../../src/ui/dialog.tsx","../../../../../src/lib/apartment.model.ts","../../../../../src/components/apartment.tsx","../../../../../src/pages/apartment/@id/+Page.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { XIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Dialog({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\r\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\r\n}\r\n\r\nfunction DialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\r\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\r\n}\r\n\r\nfunction DialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\r\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\r\n}\r\n\r\nfunction DialogClose({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\r\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\r\n}\r\n\r\nfunction DialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      data-slot=\"dialog-overlay\"\r\n      className={cn(\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogContent({\r\n  className,\r\n  children,\r\n  showCloseButton = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\r\n  showCloseButton?: boolean\r\n}) {\r\n  return (\r\n    <DialogPortal data-slot=\"dialog-portal\">\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        data-slot=\"dialog-content\"\r\n        className={cn(\r\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        {showCloseButton && (\r\n          <DialogPrimitive.Close\r\n            data-slot=\"dialog-close\"\r\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\r\n          >\r\n            <XIcon />\r\n            <span className=\"sr-only\">Close</span>\r\n          </DialogPrimitive.Close>\r\n        )}\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  )\r\n}\r\n\r\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-header\"\r\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-footer\"\r\n      className={cn(\r\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      data-slot=\"dialog-title\"\r\n      className={cn(\"text-lg leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      data-slot=\"dialog-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n}\r\n","import { reatomAsync, withCache, withDataAtom, withErrorAtom, withStatusesAtom } from \"@reatom/async\";\r\nimport { atom } from \"@reatom/core\";\r\n\r\nexport const similarData = atom<Apartment[]>([], \"\")\r\nexport const apartmentData = atom<Apartment | null>(null);\r\n\r\nexport const apartmentImages = atom<string[]>((ctx) => {\r\n  const apartment = ctx.spy(apartmentData);\r\n  if (!apartment || !apartment.images) return [];\r\n\r\n  const images = apartment.images.length > 0 ? apartment.images : (apartment && apartment.image ? [apartment.image] : []);\r\n  return images\r\n})\r\n\r\ntype Apartment = {\r\n  id: string,\r\n  adult_bed: number,\r\n  name: string,\r\n  images: string[],\r\n  image: string,\r\n  price: number,\r\n  description: string,\r\n  size: number,\r\n  dir: string,\r\n  floor: number\r\n}\r\n\r\nexport const apartmentAction = reatomAsync(async (ctx, id: string) => {\r\n  return await ctx.schedule(async () => {\r\n    const [info, similar] = await Promise.all([\r\n      fetch(`http://212.8.226.103:8000/api/info/room-types/${id}`).then(r => r.json()),\r\n      fetch(`http://212.8.226.103:8000/api/similar/room-types/${id}`).then(r => r.json()),\r\n    ])\r\n\r\n    return { info, similar }\r\n  })\r\n}).pipe(withDataAtom(null, (ctx, data) => {\r\n  const { info, similar } = data;\r\n\r\n  if (\"name\" in info) {\r\n    apartmentData(ctx, info)\r\n  }\r\n\r\n  similarData(ctx, Array.isArray(similar) ? similar : [])\r\n}), withCache(), withStatusesAtom(), withErrorAtom())\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { TravelLineSearchForm } from \"./TLSearchForm.js\";\r\nimport { usePageContext } from \"vike-react/usePageContext\";\r\nimport { navigate } from \"vike/client/router\";\r\nimport { reatomComponent, useUpdate } from \"@reatom/npm-react\";\r\nimport { atom } from \"@reatom/core\";\r\nimport { Dialog, DialogClose, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/ui/dialog.js\";\r\nimport { apartmentAction, apartmentData, apartmentImages, similarData } from \"../lib/apartment.model.js\";\r\n\r\nconst apartmentImagesIdx = atom(0)\r\n\r\nconst ApartmentImages = reatomComponent(({ ctx }) => {\r\n  const images = ctx.spy(apartmentImages);\r\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\r\n  const [canScrollRight, setCanScrollRight] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\r\n  const [fade, setFade] = useState(false);\r\n  const apartment = ctx.spy(apartmentData);\r\n  const thumbnailsRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const checkScroll = () => {\r\n      const el = thumbnailsRef.current;\r\n      if (!el) return;\r\n      setCanScrollLeft(el.scrollLeft > 0);\r\n      setCanScrollRight(el.scrollLeft + el.clientWidth < el.scrollWidth - 1);\r\n    };\r\n\r\n    checkScroll();\r\n    const el = thumbnailsRef.current;\r\n\r\n    if (el) {\r\n      el.addEventListener('scroll', checkScroll);\r\n      window.addEventListener('resize', checkScroll);\r\n    }\r\n\r\n    return () => {\r\n      if (el) el.removeEventListener('scroll', checkScroll);\r\n      window.removeEventListener('resize', checkScroll);\r\n    };\r\n  }, [images]);\r\n\r\n  if (!apartment) return null;\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-4 w-[700px]\">\r\n      {images[0] && (\r\n        <img\r\n          className={`w-full h-[458px] object-cover rounded-3xl transition-opacity duration-500 ${fade ? 'opacity-0' : 'opacity-100'}`}\r\n          alt={apartment.name}\r\n          src={selectedImage || images[0]}\r\n          onLoad={() => setFade(false)}\r\n          onClick={() => {\r\n            apartmentDialogIsOpen(ctx, true)\r\n            apartmentImagesIdx(ctx, selectedImage ? images.indexOf(selectedImage) : 0);\r\n          }}\r\n          style={{ cursor: 'zoom-in' }}\r\n        />\r\n      )}\r\n      <div className=\"relative w-full\" style={{ maxWidth: '700px' }}>\r\n        {canScrollLeft && (\r\n          <button\r\n            className=\"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 \r\n            flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all\"\r\n            style={{ boxShadow: '0 2px 16px 0 rgba(0,0,0,0.10)' }}\r\n            // onClick={() => scrollThumbnails(-1)}\r\n            aria-label=\"Прокрутить влево\"\r\n          >\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n              <path d=\"M20 8L12 16L20 24\" stroke=\"#222\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n        {canScrollRight && (\r\n          <button\r\n            className=\"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 \r\n            flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all\"\r\n            style={{ boxShadow: '0 2px 16px 0 rgba(0,0,0,0.10)' }}\r\n            // onClick={() => scrollThumbnails(1)}\r\n            aria-label=\"Прокрутить вправо\"\r\n          >\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n              <path d=\"M12 8L20 16L12 24\" stroke=\"#222\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n        <div\r\n          ref={thumbnailsRef}\r\n          className=\"overflow-x-auto whitespace-nowrap px-2 scroll-smooth w-full hide-scroll\"\r\n          style={{ maxWidth: '700px' }}\r\n        >\r\n          {images.map((src, idx) => (\r\n            <div\r\n              key={idx}\r\n              className={`inline-block mr-4 last:mr-0 rounded-2xl ${selectedImage === src ? '' : ''}`}\r\n              style={selectedImage === src ? {\r\n                background: 'white',\r\n                boxShadow: '0 0 16px 6px #106cec55',\r\n                borderRadius: '16px',\r\n                padding: 0\r\n              } : { background: 'transparent' }}\r\n            >\r\n              <img\r\n                className=\"w-[173px] h-[112px] object-cover rounded-xl cursor-pointer\"\r\n                alt={`Apartment thumbnail ${idx + 1}`}\r\n                src={src}\r\n                onClick={() => {\r\n                  if (selectedImage !== src) {\r\n                    setFade(true);\r\n                    setTimeout(() => setSelectedImage(src), 200);\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {thumbnailsRef.current && thumbnailsRef.current.scrollWidth > thumbnailsRef.current.clientWidth && (\r\n          <GalleryScrollBar thumbnailsRef={thumbnailsRef} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport const Apartment = reatomComponent(({ ctx }) => {\r\n  const { id } = usePageContext().urlParsed.search;\r\n\r\n  useUpdate((ctx) => apartmentAction(ctx, id), [id]);\r\n\r\n  const apartment = ctx.spy(apartmentData);\r\n  const similarApartments = ctx.spy(similarData)\r\n\r\n  const similarRef = useRef<HTMLDivElement | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const dragStartX = useRef(0);\r\n  const dragStartScroll = useRef(0);\r\n\r\n  const [scrollState, setScrollState] = useState({\r\n    canLeft: false,\r\n    canRight: false,\r\n    showBar: false,\r\n    barActive: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const el = similarRef.current;\r\n    if (!el) return;\r\n\r\n    const checkScroll = () => {\r\n      const canLeft = el.scrollLeft > 0;\r\n      const canRight = el.scrollLeft + el.clientWidth < el.scrollWidth - 20;\r\n      const showBar = el.scrollWidth > el.clientWidth;\r\n      const barActive = showBar && el.scrollLeft > 0;\r\n\r\n      setScrollState({ canLeft, canRight, showBar, barActive });\r\n    };\r\n\r\n    checkScroll();\r\n    el.addEventListener('scroll', checkScroll);\r\n    window.addEventListener('resize', checkScroll);\r\n\r\n    return () => {\r\n      el.removeEventListener('scroll', checkScroll);\r\n      window.removeEventListener('resize', checkScroll);\r\n    };\r\n  }, [similarApartments]);\r\n\r\n  useEffect(() => {\r\n    if (!isDragging) return;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const el = similarRef.current;\r\n      if (!el) return;\r\n\r\n      const dx = e.clientX - dragStartX.current;\r\n      const maxScroll = el.scrollWidth - el.clientWidth;\r\n      const maxBarMove = el.clientWidth - Math.max(40, (el.clientWidth * (el.clientWidth / el.scrollWidth)) / 3);\r\n      el.scrollLeft = dragStartScroll.current + (dx / maxBarMove) * maxScroll;\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setIsDragging(false);\r\n      document.body.style.userSelect = '';\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleMouseMove);\r\n    window.addEventListener('mouseup', handleMouseUp);\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove);\r\n      window.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n  }, [isDragging]);\r\n\r\n  const handleScrollBarMouseDown = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n    dragStartX.current = e.clientX;\r\n    dragStartScroll.current = similarRef.current!.scrollLeft;\r\n    document.body.style.userSelect = 'none';\r\n  };\r\n\r\n  const scrollSimilar = (dir: number) => {\r\n    const el = similarRef.current;\r\n    if (!el) return;\r\n    el.scrollBy({ left: dir * 380, behavior: 'smooth' });\r\n    if (el.scrollLeft + 380 > 0) setScrollState(s => ({ ...s, barActive: true }));\r\n  };\r\n\r\n  let scrollBarStyle: React.CSSProperties = { display: 'none' };\r\n\r\n  if (scrollState.showBar && similarRef.current) {\r\n    const el = similarRef.current;\r\n    const ratio = el.clientWidth / el.scrollWidth;\r\n    const width = Math.max(40, (el.clientWidth * ratio) / 3);\r\n    const left = (el.scrollLeft / (el.scrollWidth - el.clientWidth)) * (el.clientWidth - width);\r\n\r\n    scrollBarStyle = {\r\n      position: 'absolute',\r\n      top: 8,\r\n      left,\r\n      width,\r\n      height: 8,\r\n      background: 'rgba(0,0,0,0.13)',\r\n      borderRadius: 8,\r\n      transition: 'left 0.2s, opacity 0.4s',\r\n      opacity: scrollState.barActive ? 1 : 0,\r\n      cursor: 'pointer',\r\n    };\r\n  }\r\n\r\n  if (ctx.spy(apartmentAction.statusesAtom).isPending) {\r\n    return (\r\n      <div className=\"w-full flex justify-center items-center h-96 text-xl text-gray-500\">\r\n        Загрузка...\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (ctx.spy(apartmentAction.statusesAtom).isRejected || !apartment) {\r\n    return (\r\n      <div className=\"w-full flex justify-center items-center h-96 text-xl text-red-500\">\r\n        {ctx.spy(apartmentAction.errorAtom)?.message ?? 'Нет данных'}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <TravelLineSearchForm id={'detail'} />\r\n      <div className=\"w-full max-w-[1440px] px-4 md:px-8 mt-8 flex flex-col gap-8\">\r\n        <div className=\"flex flex-col lg:flex-row justify-center gap-5\">\r\n          <ApartmentImages />\r\n          <div className=\"flex flex-col gap-6 w-full max-w-[380px]\">\r\n            <div className=\"flex flex-col items-start gap-6 p-6 rounded-3xl border border-solid border-[#00000033] bg-white\">\r\n              <h1 className=\"text-2xl font-semibold text-black\">\r\n                {apartment.name}\r\n              </h1>\r\n              <div className=\"flex flex-wrap items-center gap-6 text-base text-black\">\r\n                <span><span className=\"font-medium\">\r\n                  {apartment.adult_bed}</span> спальных места\r\n                </span>\r\n                <span>\r\n                  <span className=\"font-medium\">{apartment.size}</span> м²\r\n                </span>\r\n                {apartment.floor && (\r\n                  <span>\r\n                    <span className=\"font-medium\">{apartment.floor}</span> этаж\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <div className=\"text-[40px] font-medium text-black leading-none\">\r\n                {apartment.price} <span className=\"text-2xl\">₽</span> <span className=\"text-lg font-normal\">в сутки</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col items-start gap-2 p-6 rounded-3xl border border-solid border-[#00000033] bg-white\">\r\n              <div className=\"font-medium text-base text-black\">\r\n                ⏰ Проживание:\r\n              </div>\r\n              <div className=\"text-base text-black\">\r\n                Заселение - после 14:00 <br />Выезд - до 12:00\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col items-start gap-6 p-6 rounded-3xl border border-solid border-[#00000033] bg-white\">\r\n              <div className=\"flex w-full justify-between items-center\">\r\n                <div className=\"font-medium text-xl text-black\">\r\n                  За 2 суток\r\n                </div>\r\n                <div className=\"font-medium text-xl text-black text-right\">\r\n                  {apartment.price * 2} <span className=\"text-base font-normal\">₽</span>\r\n                </div>\r\n              </div>\r\n              <a\r\n                href=\"/booking\"\r\n                className=\"w-full bg-[#106cec] text-center rounded-full py-2 hover:bg-[#0d5bc7] transition-colors text-white text-xl font-medium\"\r\n              >\r\n                Забронировать\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <section className=\"flex flex-col items-start gap-6 p-6 rounded-3xl border border-solid border-[#00000033] bg-white max-w-[1100px] w-full mx-auto\">\r\n          <p className=\"text-base text-black whitespace-pre-line\">\r\n            {apartment.description}\r\n          </p>\r\n        </section>\r\n        <div className=\"mt-12 relative\">\r\n          <h2 className=\"text-4xl font-semibold text-[#2d2d2d] mb-6\">\r\n            Похожие квартиры\r\n          </h2>\r\n          <div className=\"relative\">\r\n            {scrollState.canLeft && (\r\n              <button\r\n                className=\"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-16 h-16 \r\n                  flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all\"\r\n                onClick={() => scrollSimilar(-1)}\r\n                aria-label=\"Прокрутить влево\"\r\n              >\r\n                <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n                  <path d=\"M20 8L12 16L20 24\" stroke=\"#222\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n              </button>\r\n            )}\r\n            {scrollState.canRight && (\r\n              <button\r\n                className=\"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-16 h-16 \r\n                  flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all\"\r\n                onClick={() => scrollSimilar(1)}\r\n                aria-label=\"Прокрутить вправо\"\r\n              >\r\n                <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n                  <path d=\"M12 8L20 16L12 24\" stroke=\"#222\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n              </button>\r\n            )}\r\n            <div\r\n              ref={similarRef}\r\n              className=\"hide-scroll flex gap-8 pb-4 flex-nowrap overflow-x-auto overflow-y-visible\"\r\n            >\r\n              {similarApartments.map((ap) => (\r\n                <div\r\n                  key={ap.id}\r\n                  className=\"flex-shrink-0 bg-white rounded-3xl shadow-lg hover:shadow-lg transform duration-500 ease-in-out hover:scale-105 cursor-pointer\"\r\n                  style={{ width: 360, height: 370, minWidth: 320, minHeight: 370 }}\r\n                  onClick={() => navigate(`/apartment/${ap.id}`)}\r\n                  tabIndex={0}\r\n                  role=\"button\"\r\n                  onKeyDown={e => { if (e.key === 'Enter' || e.key === ' ') navigate(`/apartment/${ap.id}`); }}\r\n                >\r\n                  <img className=\"object-cover w-full h-[240px]\" alt={ap.name} src={ap.image} />\r\n                  <div className=\"flex flex-col justify-between px-6 pt-4 pb-6 w-full h-[130px]\">\r\n                    <div className=\"flex items-center justify-between w-full mb-4\">\r\n                      <p className=\"font-medium text-black text-[32px] leading-none\">\r\n                        {ap.price} <span className=\"text-2xl\">₽</span>\r\n                      </p>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <img className=\"w-5 h-5\" alt=\"Bed icon\" src=\"https://c.animaapp.com/x7ciH6IU/img/bed-2@2x.png\" />\r\n                        <span className=\"font-normal text-[#4a4a4a] text-base\">{ap.adult_bed}</span>\r\n                      </div>\r\n                    </div>\r\n                    {(() => {\r\n                      const [address, category] = (ap.name || '').split('|');\r\n                      return (\r\n                        <div className=\"w-full text-left font-normal text-[#4a4a4a] text-base\">\r\n                          <div>{address}</div>\r\n                          {category && <div>{category}</div>}\r\n                        </div>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {scrollState.showBar && (\r\n              <div className=\"relative h-6 mt-1\">\r\n                <div\r\n                  className=\"absolute left-0 right-0 top-2 h-2 bg-white/70 rounded-full\"\r\n                  style={{ opacity: scrollState.barActive ? 1 : 0, transition: 'opacity 0.4s' }}\r\n                />\r\n                <div\r\n                  style={scrollBarStyle}\r\n                  onMouseDown={handleScrollBarMouseDown}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ApartmentDialog />\r\n    </>\r\n  );\r\n}, \"Screen\")\r\n\r\nconst apartmentDialogIsOpen = atom(false, \"\")\r\n\r\nconst ApartmentDialog = reatomComponent(({ ctx }) => {\r\n  const images = ctx.spy(apartmentImages);\r\n  const modalImageIdx = 1;\r\n\r\n  return (\r\n    <Dialog open={ctx.spy(apartmentDialogIsOpen)} onOpenChange={v => apartmentDialogIsOpen(ctx, v)}>\r\n      <DialogContent>\r\n        <DialogHeader>\r\n          <DialogTitle>Are you absolutely sure?</DialogTitle>\r\n          <DialogDescription>\r\n            This action cannot be undone. This will permanently delete your account\r\n            and remove your data from our servers.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div\r\n          className=\"relative inline-flex items-center justify-center\"\r\n          style={{ maxWidth: '90vw', maxHeight: '90vh' }}\r\n          onClick={e => e.stopPropagation()}\r\n        >\r\n          <img\r\n            src={images[modalImageIdx]}\r\n            alt={`Фото ${modalImageIdx + 1}`}\r\n            className=\"rounded-3xl shadow-2xl border-4 border-white object-contain max-h-[90vh] max-w-[90vw] transition-all duration-300\"\r\n            style={{ background: 'white' }}\r\n          />\r\n          <DialogClose asChild>\r\n            <button\r\n              className=\"absolute top-0 right-0 translate-x-[60px]\r\n             -translate-y-[60px] text-white bg-black/40 rounded-full\r\n              w-12 h-12 flex items-center justify-center shadow-lg hover:bg-black/60 transition-opacity duration-300\"\r\n              style={{ fontSize: 28, lineHeight: 1, zIndex: 60 }}\r\n              aria-label=\"Закрыть\"\r\n            >\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"none\" />\r\n                <path d=\"M7 7L17 17M17 7L7 17\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n              </svg>\r\n            </button>\r\n          </DialogClose>\r\n          {images.length > 1 && (\r\n            <button\r\n              className=\"absolute left-0 top-1/2 -translate-x-[60px]\r\n               -translate-y-1/2 text-white bg-black/40 rounded-full\r\n                p-3 hover:bg-black/60 transition-opacity duration-300\r\n                 min-w-[44px] min-h-[44px] flex items-center justify-center\"\r\n              style={{ fontSize: 28, zIndex: 60, boxShadow: '0 2px 8px 0 rgba(0,0,0,0.18)' }}\r\n              onClick={() => apartmentImagesIdx(ctx, (modalImageIdx - 1 + images.length) % images.length)}\r\n              aria-label=\"Предыдущее фото\"\r\n            >\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n                <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"none\" />\r\n                <path d=\"M20 8L12 16L20 24\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n              </svg>\r\n            </button>\r\n          )}\r\n          {images.length > 1 && (\r\n            <button\r\n              className=\"absolute right-0 top-1/2 translate-x-[60px]\r\n               -translate-y-1/2 text-white bg-black/40 rounded-full\r\n                p-3 hover:bg-black/60 transition-opacity duration-300\r\n                 min-w-[44px] min-h-[44px] flex items-center justify-center\"\r\n              style={{ fontSize: 28, zIndex: 60, boxShadow: '0 2px 8px 0 rgba(0,0,0,0.18)' }}\r\n              onClick={() => apartmentImagesIdx(ctx, (modalImageIdx + 1) % images.length)}\r\n              aria-label=\"Следующее фото\"\r\n            >\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n                <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"none\" />\r\n                <path d=\"M12 8L20 16L12 24\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}, \"ApartmentDialog\")\r\n\r\nfunction GalleryScrollBar({ \r\n  thumbnailsRef \r\n}: { \r\n  thumbnailsRef: React.RefObject<HTMLDivElement | null> \r\n}) {\r\n  const [drag, setDrag] = useState(false);\r\n  const dragStartX = useRef(0);\r\n  const dragStartScrollLeft = useRef(0);\r\n\r\n  useEffect(() => {\r\n    if (!drag) return;\r\n\r\n    const handleMove = (e: MouseEvent) => {\r\n      const el = thumbnailsRef.current;\r\n      if (!el) return;\r\n      const dx = e.clientX - dragStartX.current;\r\n      const maxScroll = el.scrollWidth - el.clientWidth;\r\n      const ratio = el.clientWidth / el.scrollWidth;\r\n      const width = Math.max(40, el.clientWidth * ratio);\r\n      const maxBarMove = el.clientWidth - width;\r\n      el.scrollLeft = dragStartScrollLeft.current + (dx / maxBarMove) * maxScroll;\r\n    };\r\n\r\n    const handleUp = () => {\r\n      setDrag(false);\r\n      document.body.style.userSelect = '';\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleMove);\r\n    window.addEventListener('mouseup', handleUp);\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMove);\r\n      window.removeEventListener('mouseup', handleUp);\r\n    };\r\n  }, [drag, thumbnailsRef]);\r\n\r\n  const el = thumbnailsRef.current;\r\n  if (!el) return null;\r\n\r\n  const ratio = el.clientWidth / el.scrollWidth;\r\n  const width = Math.max(40, el.clientWidth * ratio);\r\n  const left = (el.scrollLeft / (el.scrollWidth - el.clientWidth)) * (el.clientWidth - width);\r\n\r\n  return (\r\n    <div style={{ position: 'relative', height: '18px', marginTop: '2px' }}>\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          left,\r\n          width,\r\n          height: '6px',\r\n          background: 'rgba(0,0,0,0.09)',\r\n          borderRadius: '6px',\r\n          transition: 'left 0.2s',\r\n          cursor: 'pointer',\r\n        }}\r\n        onMouseDown={e => {\r\n          setDrag(true);\r\n          dragStartX.current = e.clientX;\r\n          dragStartScrollLeft.current = el.scrollLeft;\r\n          document.body.style.userSelect = 'none';\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}","import { Apartment } from \"@/components/apartment\";\r\n\r\nexport default function Page() {\r\n  return (\r\n    <>\r\n      <Apartment />\r\n    </>\r\n  )\r\n}"],"names":["Dialog","props","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogClose","DialogPrimitive.Close","DialogOverlay","className","jsx","DialogPrimitive.Overlay","cn","DialogContent","children","showCloseButton","jsxs","DialogPrimitive.Content","XIcon","DialogHeader","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","similarData","atom","apartmentData","apartmentImages","ctx","apartment","apartmentAction","reatomAsync","id","info","similar","r","withDataAtom","data","withCache","withStatusesAtom","withErrorAtom","apartmentImagesIdx","ApartmentImages","reatomComponent","images","canScrollLeft","setCanScrollLeft","useState","canScrollRight","setCanScrollRight","selectedImage","setSelectedImage","fade","setFade","thumbnailsRef","useRef","useEffect","checkScroll","el","apartmentDialogIsOpen","src","idx","GalleryScrollBar","Apartment","usePageContext","useUpdate","similarApartments","similarRef","isDragging","setIsDragging","dragStartX","dragStartScroll","scrollState","setScrollState","canLeft","canRight","showBar","barActive","handleMouseMove","e","dx","maxScroll","maxBarMove","handleMouseUp","handleScrollBarMouseDown","scrollSimilar","dir","s","scrollBarStyle","ratio","width","Fragment","TravelLineSearchForm","ap","navigate","address","category","ApartmentDialog","modalImageIdx","v","drag","setDrag","dragStartScrollLeft","handleMove","handleUp","left","Page"],"mappings":"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"}