import{j as e,R as M,C as P,c as w,b as A,X as R,T as B,D as U,P as I,O as _,d as j,r as z,e as o,u as O,f as $,i as X,a as H,o as F}from"../chunks/chunk-M7f6xKhD.js";import{r as V,w as G,a as K,b as q,c as J,T as Q}from"../chunks/chunk-C5TWPvR2.js";import{n as D}from"../chunks/chunk-B2FnCi9K.js";import"../chunks/chunk-Db1vM16j.js";import"../chunks/chunk-riqJSy5I.js";/* empty css                      */function Y({...s}){return e.jsx(M,{"data-slot":"dialog",...s})}function Z({...s}){return e.jsx(I,{"data-slot":"dialog-portal",...s})}function ee({...s}){return e.jsx(A,{"data-slot":"dialog-close",...s})}function te({className:s,...a}){return e.jsx(_,{"data-slot":"dialog-overlay",className:w("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function se({className:s,children:a,showCloseButton:r=!0,...i}){return e.jsxs(Z,{"data-slot":"dialog-portal",children:[e.jsx(te,{}),e.jsxs(P,{"data-slot":"dialog-content",className:w("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[a,r&&e.jsxs(A,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(R,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ae({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:w("flex flex-col gap-2 text-center sm:text-left",s),...a})}function re({className:s,...a}){return e.jsx(B,{"data-slot":"dialog-title",className:w("text-lg leading-none font-semibold",s),...a})}function ne({className:s,...a}){return e.jsx(U,{"data-slot":"dialog-description",className:w("text-muted-foreground text-sm",s),...a})}const T=j([],""),S=j(null),E=j(s=>{const a=s.spy(S);return!a||!a.images?[]:a.images.length>0?a.images:a&&a.image?[a.image]:[]}),k=V(async(s,a)=>await s.schedule(async()=>{const[r,i]=await Promise.all([fetch(`http://212.8.226.103:8000/api/info/room-types/${a}`).then(d=>d.json()),fetch(`http://212.8.226.103:8000/api/similar/room-types/${a}`).then(d=>d.json())]);return{info:r,similar:i}})).pipe(G(null,(s,a)=>{const{info:r,similar:i}=a;"name"in r&&S(s,r),T(s,Array.isArray(i)?i:[])}),K(),q(),J()),N=j(0),le=z(({ctx:s})=>{const a=s.spy(E),[r,i]=o.useState(!1),[d,c]=o.useState(!1),[f,b]=o.useState(null),[v,u]=o.useState(!1),g=s.spy(S),p=o.useRef(null);return o.useEffect(()=>{const n=()=>{const t=p.current;t&&(i(t.scrollLeft>0),c(t.scrollLeft+t.clientWidth<t.scrollWidth-1))};n();const m=p.current;return m&&(m.addEventListener("scroll",n),window.addEventListener("resize",n)),()=>{m&&m.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[a]),g?e.jsxs("div",{className:"flex flex-col gap-4 w-[700px]",children:[a[0]&&e.jsx("img",{className:`w-full h-[458px] object-cover rounded-3xl transition-opacity duration-500 ${v?"opacity-0":"opacity-100"}`,alt:g.name,src:f||a[0],onLoad:()=>u(!1),onClick:()=>{W(s,!0),N(s,f?a.indexOf(f):0)},style:{cursor:"zoom-in"}}),e.jsxs("div",{className:"relative w-full",style:{maxWidth:"700px"},children:[r&&e.jsx("button",{className:`absolute left-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 \r
            flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all`,style:{boxShadow:"0 2px 16px 0 rgba(0,0,0,0.10)"},"aria-label":"Прокрутить влево",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"none",children:e.jsx("path",{d:"M20 8L12 16L20 24",stroke:"#222",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),d&&e.jsx("button",{className:`absolute right-0 top-1/2 -translate-y-1/2 z-10 w-12 h-12 \r
            flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all`,style:{boxShadow:"0 2px 16px 0 rgba(0,0,0,0.10)"},"aria-label":"Прокрутить вправо",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"none",children:e.jsx("path",{d:"M12 8L20 16L12 24",stroke:"#222",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{ref:p,className:"overflow-x-auto whitespace-nowrap px-2 scroll-smooth w-full hide-scroll",style:{maxWidth:"700px"},children:a.map((n,m)=>e.jsx("div",{className:"inline-block mr-4 last:mr-0 rounded-2xl ",style:f===n?{background:"white",boxShadow:"0 0 16px 6px #106cec55",borderRadius:"16px",padding:0}:{background:"transparent"},children:e.jsx("img",{className:"w-[173px] h-[112px] object-cover rounded-xl cursor-pointer",alt:`Apartment thumbnail ${m+1}`,src:n,onClick:()=>{f!==n&&(u(!0),setTimeout(()=>b(n),200))}})},m))}),p.current&&p.current.scrollWidth>p.current.clientWidth&&e.jsx(de,{thumbnailsRef:p})]})]}):null}),ie=z(({ctx:s})=>{const{id:a}=O().urlParsed.search;$(t=>k(t,a),[a]);const r=s.spy(S),i=s.spy(T),d=o.useRef(null),[c,f]=o.useState(!1),b=o.useRef(0),v=o.useRef(0),[u,g]=o.useState({canLeft:!1,canRight:!1,showBar:!1,barActive:!1});o.useEffect(()=>{const t=d.current;if(!t)return;const l=()=>{const h=t.scrollLeft>0,x=t.scrollLeft+t.clientWidth<t.scrollWidth-20,y=t.scrollWidth>t.clientWidth,L=y&&t.scrollLeft>0;g({canLeft:h,canRight:x,showBar:y,barActive:L})};return l(),t.addEventListener("scroll",l),window.addEventListener("resize",l),()=>{t.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[i]),o.useEffect(()=>{if(!c)return;const t=h=>{const x=d.current;if(!x)return;const y=h.clientX-b.current,L=x.scrollWidth-x.clientWidth,C=x.clientWidth-Math.max(40,x.clientWidth*(x.clientWidth/x.scrollWidth)/3);x.scrollLeft=v.current+y/C*L},l=()=>{f(!1),document.body.style.userSelect=""};return window.addEventListener("mousemove",t),window.addEventListener("mouseup",l),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",l)}},[c]);const p=t=>{t.preventDefault(),f(!0),b.current=t.clientX,v.current=d.current.scrollLeft,document.body.style.userSelect="none"},n=t=>{const l=d.current;l&&(l.scrollBy({left:t*380,behavior:"smooth"}),l.scrollLeft+380>0&&g(h=>({...h,barActive:!0})))};let m={display:"none"};if(u.showBar&&d.current){const t=d.current,l=t.clientWidth/t.scrollWidth,h=Math.max(40,t.clientWidth*l/3);m={position:"absolute",top:8,left:t.scrollLeft/(t.scrollWidth-t.clientWidth)*(t.clientWidth-h),width:h,height:8,background:"rgba(0,0,0,0.13)",borderRadius:8,transition:"left 0.2s, opacity 0.4s",opacity:u.barActive?1:0,cursor:"pointer"}}return s.spy(k.statusesAtom).isPending?e.jsx("div",{className:"w-full flex justify-center items-center h-96 text-xl text-gray-500",children:"Загрузка..."}):s.spy(k.statusesAtom).isRejected||!r?e.jsx("div",{className:"w-full flex justify-center items-center h-96 text-xl text-red-500",children:s.spy(k.errorAtom)?.message??"Нет данных"}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{id:"detail"}),e.jsxs("div",{className:"w-full max-w-[1440px] px-4 md:px-8 mt-8 flex flex-col gap-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-center gap-5",children:[e.jsx(le,{}),e.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-[380px]",children:[e.jsxs("div",{className:"flex flex-col items-start gap-6 p-6 rounded-3xl border border-solid border-[#00000033] bg-white",children:[e.jsx("h1",{className:"text-2xl font-semibold text-black",children:r.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-base text-black",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:r.adult_bed})," спальных места"]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:r.size})," м²"]}),r.floor&&e.jsxs("span",{children:[e.jsx("span",{className:"font-medium",children:r.floor})," этаж"]})]}),e.jsxs("div",{className:"text-[40px] font-medium text-black leading-none",children:[r.price," ",e.jsx("span",{className:"text-2xl",children:"₽"})," ",e.jsx("span",{className:"text-lg font-normal",children:"в сутки"})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2 p-6 rounded-3xl border border-solid border-[#00000033] bg-white",children:[e.jsx("div",{className:"font-medium text-base text-black",children:"⏰ Проживание:"}),e.jsxs("div",{className:"text-base text-black",children:["Заселение - после 14:00 ",e.jsx("br",{}),"Выезд - до 12:00"]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-6 p-6 rounded-3xl border border-solid border-[#00000033] bg-white",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx("div",{className:"font-medium text-xl text-black",children:"За 2 суток"}),e.jsxs("div",{className:"font-medium text-xl text-black text-right",children:[r.price*2," ",e.jsx("span",{className:"text-base font-normal",children:"₽"})]})]}),e.jsx("a",{href:"/booking",className:"w-full bg-[#106cec] text-center rounded-full py-2 hover:bg-[#0d5bc7] transition-colors text-white text-xl font-medium",children:"Забронировать"})]})]})]}),e.jsx("section",{className:"flex flex-col items-start gap-6 p-6 rounded-3xl border border-solid border-[#00000033] bg-white max-w-[1100px] w-full mx-auto",children:e.jsx("p",{className:"text-base text-black whitespace-pre-line",children:r.description})}),e.jsxs("div",{className:"mt-12 relative",children:[e.jsx("h2",{className:"text-4xl font-semibold text-[#2d2d2d] mb-6",children:"Похожие квартиры"}),e.jsxs("div",{className:"relative",children:[u.canLeft&&e.jsx("button",{className:`absolute left-0 top-1/2 -translate-y-1/2 z-10 w-16 h-16 \r
                  flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all`,onClick:()=>n(-1),"aria-label":"Прокрутить влево",children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:e.jsx("path",{d:"M20 8L12 16L20 24",stroke:"#222",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),u.canRight&&e.jsx("button",{className:`absolute right-0 top-1/2 -translate-y-1/2 z-10 w-16 h-16 \r
                  flex items-center justify-center rounded-full backdrop-blur-md bg-white/60 shadow-md hover:bg-white/80 transition-all`,onClick:()=>n(1),"aria-label":"Прокрутить вправо",children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:e.jsx("path",{d:"M12 8L20 16L12 24",stroke:"#222",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{ref:d,className:"hide-scroll flex gap-8 pb-4 flex-nowrap overflow-x-auto overflow-y-visible",children:i.map(t=>e.jsxs("div",{className:"flex-shrink-0 bg-white rounded-3xl shadow-lg hover:shadow-lg transform duration-500 ease-in-out hover:scale-105 cursor-pointer",style:{width:360,height:370,minWidth:320,minHeight:370},onClick:()=>D(`/apartment/${t.id}`),tabIndex:0,role:"button",onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&D(`/apartment/${t.id}`)},children:[e.jsx("img",{className:"object-cover w-full h-[240px]",alt:t.name,src:t.image}),e.jsxs("div",{className:"flex flex-col justify-between px-6 pt-4 pb-6 w-full h-[130px]",children:[e.jsxs("div",{className:"flex items-center justify-between w-full mb-4",children:[e.jsxs("p",{className:"font-medium text-black text-[32px] leading-none",children:[t.price," ",e.jsx("span",{className:"text-2xl",children:"₽"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{className:"w-5 h-5",alt:"Bed icon",src:"https://c.animaapp.com/x7ciH6IU/img/bed-2@2x.png"}),e.jsx("span",{className:"font-normal text-[#4a4a4a] text-base",children:t.adult_bed})]})]}),(()=>{const[l,h]=(t.name||"").split("|");return e.jsxs("div",{className:"w-full text-left font-normal text-[#4a4a4a] text-base",children:[e.jsx("div",{children:l}),h&&e.jsx("div",{children:h})]})})()]})]},t.id))}),u.showBar&&e.jsxs("div",{className:"relative h-6 mt-1",children:[e.jsx("div",{className:"absolute left-0 right-0 top-2 h-2 bg-white/70 rounded-full",style:{opacity:u.barActive?1:0,transition:"opacity 0.4s"}}),e.jsx("div",{style:m,onMouseDown:p})]})]})]})]}),e.jsx(oe,{})]})},"Screen"),W=j(!1,""),oe=z(({ctx:s})=>{const a=s.spy(E),r=1;return e.jsx(Y,{open:s.spy(W),onOpenChange:i=>W(s,i),children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Are you absolutely sure?"}),e.jsx(ne,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),e.jsxs("div",{className:"relative inline-flex items-center justify-center",style:{maxWidth:"90vw",maxHeight:"90vh"},onClick:i=>i.stopPropagation(),children:[e.jsx("img",{src:a[r],alt:`Фото ${r+1}`,className:"rounded-3xl shadow-2xl border-4 border-white object-contain max-h-[90vh] max-w-[90vw] transition-all duration-300",style:{background:"white"}}),e.jsx(ee,{asChild:!0,children:e.jsx("button",{className:`absolute top-0 right-0 translate-x-[60px]\r
             -translate-y-[60px] text-white bg-black/40 rounded-full\r
              w-12 h-12 flex items-center justify-center shadow-lg hover:bg-black/60 transition-opacity duration-300`,style:{fontSize:28,lineHeight:1,zIndex:60},"aria-label":"Закрыть",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"12",fill:"none"}),e.jsx("path",{d:"M7 7L17 17M17 7L7 17",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]})})}),a.length>1&&e.jsx("button",{className:`absolute left-0 top-1/2 -translate-x-[60px]\r
               -translate-y-1/2 text-white bg-black/40 rounded-full\r
                p-3 hover:bg-black/60 transition-opacity duration-300\r
                 min-w-[44px] min-h-[44px] flex items-center justify-center`,style:{fontSize:28,zIndex:60,boxShadow:"0 2px 8px 0 rgba(0,0,0,0.18)"},onClick:()=>N(s,(r-1+a.length)%a.length),"aria-label":"Предыдущее фото",children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 32 32",fill:"none",children:[e.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"none"}),e.jsx("path",{d:"M20 8L12 16L20 24",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.length>1&&e.jsx("button",{className:`absolute right-0 top-1/2 translate-x-[60px]\r
               -translate-y-1/2 text-white bg-black/40 rounded-full\r
                p-3 hover:bg-black/60 transition-opacity duration-300\r
                 min-w-[44px] min-h-[44px] flex items-center justify-center`,style:{fontSize:28,zIndex:60,boxShadow:"0 2px 8px 0 rgba(0,0,0,0.18)"},onClick:()=>N(s,(r+1)%a.length),"aria-label":"Следующее фото",children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 32 32",fill:"none",children:[e.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"none"}),e.jsx("path",{d:"M12 8L20 16L12 24",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]})})},"ApartmentDialog");function de({thumbnailsRef:s}){const[a,r]=o.useState(!1),i=o.useRef(0),d=o.useRef(0);o.useEffect(()=>{if(!a)return;const u=p=>{const n=s.current;if(!n)return;const m=p.clientX-i.current,t=n.scrollWidth-n.clientWidth,l=n.clientWidth/n.scrollWidth,h=Math.max(40,n.clientWidth*l),x=n.clientWidth-h;n.scrollLeft=d.current+m/x*t},g=()=>{r(!1),document.body.style.userSelect=""};return window.addEventListener("mousemove",u),window.addEventListener("mouseup",g),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",g)}},[a,s]);const c=s.current;if(!c)return null;const f=c.clientWidth/c.scrollWidth,b=Math.max(40,c.clientWidth*f),v=c.scrollLeft/(c.scrollWidth-c.clientWidth)*(c.clientWidth-b);return e.jsx("div",{style:{position:"relative",height:"18px",marginTop:"2px"},children:e.jsx("div",{style:{position:"absolute",left:v,width:b,height:"6px",background:"rgba(0,0,0,0.09)",borderRadius:"6px",transition:"left 0.2s",cursor:"pointer"},onMouseDown:u=>{r(!0),i.current=u.clientX,d.current=c.scrollLeft,document.body.style.userSelect="none"}})})}function ce(){return e.jsx(e.Fragment,{children:e.jsx(ie,{})})}const ue=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"})),be={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:F}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/apartment/@id/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ue}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/renderer/+Layout.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:H}]},reactStrictMode:{type:"standard",definedAtData:{filePathToShowToUser:"/src/renderer/+config.ts",fileExportPathToShowToUser:["default","reactStrictMode"]},valueSerialized:{type:"js-serialized",value:!1}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:X}}};export{be as configValuesSerialized};
//# sourceMappingURL=src_pages_apartment_-id.ChR_tUo7.js.map
