{"version":3,"file":"chunk-riqJSy5I.js","sources":["../../../../../node_modules/vike/dist/esm/utils/unique.js","../../../../../node_modules/vike/dist/esm/utils/getGlobalObject.js","../../../../../node_modules/@brillout/picocolors/dist/esm/picocolors.browser.js","../../../../../node_modules/vike/dist/esm/utils/PROJECT_VERSION.js","../../../../../node_modules/vike/dist/esm/utils/assertSingleInstance.js","../../../../../node_modules/vike/dist/esm/utils/isNodeJS.js","../../../../../node_modules/vike/dist/esm/utils/createErrorWithCleanStackTrace.js","../../../../../node_modules/vike/dist/esm/utils/isObject.js","../../../../../node_modules/vike/dist/esm/utils/assert.js","../../../../../node_modules/vike/dist/esm/utils/humanizeTime.js","../../../../../node_modules/vike/dist/esm/utils/isCallable.js","../../../../../node_modules/vike/dist/esm/utils/isArray.js","../../../../../node_modules/vike/dist/esm/shared/page-configs/helpers.js","../../../../../node_modules/vike/dist/esm/shared/hooks/getHook.js","../../../../../node_modules/vike/dist/esm/shared/hooks/execHook.js"],"sourcesContent":["export function unique(arr) {\n    return Array.from(new Set(arr));\n}\n","export { getGlobalObject };\n/**\n * Share information across module instances.\n *\n * @__NO_SIDE_EFFECTS__\n */\nfunction getGlobalObject(moduleId, defaultValue) {\n    const globals = getGlobals();\n    const globalObject = (globals[moduleId] ?? (globals[moduleId] = defaultValue));\n    return globalObject;\n}\nfunction getGlobals() {\n    var _a;\n    globalThis._vike ?? (globalThis._vike = {});\n    (_a = globalThis._vike).globals ?? (_a.globals = {});\n    return globalThis._vike.globals;\n}\n","export default new Proxy({}, {\n    get: (_, p) => (s) => {\n        if (p === 'code')\n            return `\\`${s}\\``;\n        if (p === 'string')\n            return `'${s}'`;\n        return s;\n    }\n});\n","// Automatically updated by @brillout/release-me\nexport const PROJECT_VERSION = '0.4.244';\n","export { assertSingleInstance_onClientEntryServerRouting };\nexport { assertSingleInstance_onClientEntryClientRouting };\nexport { assertSingleInstance_onAssertModuleLoad };\n//  - Show warning if there are two different Vike versions loaded\n//  - Show warning if entry of Client Routing and entry of Server Routing are both loaded\n//  - Show warning if Vike is loaded twice\nimport { unique } from './unique.js';\nimport { getGlobalObject } from './getGlobalObject.js';\nimport pc from '@brillout/picocolors';\nimport { PROJECT_VERSION } from './PROJECT_VERSION.js';\n/* Use original assertWarning() after all CJS is removed from node_modules/vike/dist/\nimport { assertWarning } from './assert.js'\n*/\nlet globalObject;\n// getGlobalObjectSafe() can be called before this line\nglobalObject ?? (globalObject = genGlobalConfig());\nfunction genGlobalConfig() {\n    return getGlobalObject('utils/assertSingleInstance.ts', {\n        instances: [],\n        alreadyLogged: new Set(),\n    });\n}\n// We need getGlobalObjectSafe() because globalObject is `undefined` when exported functions are called before globalObject is initialized\nfunction getGlobalObjectSafe() {\n    globalObject ?? (globalObject = genGlobalConfig());\n    return globalObject;\n}\nconst clientRuntimesClonflict = 'Client runtime of both Server Routing and Client Routing loaded https://vike.dev/client-runtimes-conflict';\nconst clientNotSingleInstance = 'Client runtime loaded twice https://vike.dev/client-runtime-duplicated';\nfunction assertSingleInstance() {\n    const globalObject = getGlobalObjectSafe();\n    {\n        const versions = unique(globalObject.instances);\n        assertWarning(versions.length <= 1, \n        // Do *NOT* patch Vike to remove this warning: you *will* eventually encounter the issues listed at https://vike.dev/warning/version-mismatch\n        // - This happened before: https://github.com/vikejs/vike/issues/1108#issuecomment-1719061509\n        `vike@${pc.bold(versions[0])} and vike@${pc.bold(versions[1])} loaded which is highly discouraged, see ${pc.underline('https://vike.dev/warning/version-mismatch')}`, { onlyOnce: true, showStackTrace: false });\n    }\n    if (globalObject.checkSingleInstance && globalObject.instances.length > 1) {\n        /*/ Not sure whether circular dependency can cause problems? In principle not since client-side code is ESM.\n        console.warn(clientNotSingleInstance)\n        /*/\n        assertWarning(false, clientNotSingleInstance, { onlyOnce: true, showStackTrace: true });\n        //*/\n    }\n}\nfunction assertSingleInstance_onClientEntryServerRouting(isProduction) {\n    const globalObject = getGlobalObjectSafe();\n    assertWarning(globalObject.isClientRouting !== true, clientRuntimesClonflict, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    assertWarning(globalObject.isClientRouting === undefined, clientNotSingleInstance, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    globalObject.isClientRouting = false;\n    if (isProduction)\n        globalObject.checkSingleInstance = true;\n    assertSingleInstance();\n}\nfunction assertSingleInstance_onClientEntryClientRouting(isProduction) {\n    const globalObject = getGlobalObjectSafe();\n    assertWarning(globalObject.isClientRouting !== false, clientRuntimesClonflict, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    assertWarning(globalObject.isClientRouting === undefined, clientNotSingleInstance, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    globalObject.isClientRouting = true;\n    if (isProduction)\n        globalObject.checkSingleInstance = true;\n    assertSingleInstance();\n}\n// Called by utils/assert.ts which is (most certainly) loaded by all entries. That way we don't have to call a callback for every entry. (There are a lot of entries: `client/router/`, `client/`, `node/runtime/`, `node/vite/`, `node/cli`.)\nfunction assertSingleInstance_onAssertModuleLoad() {\n    const globalObject = getGlobalObjectSafe();\n    globalObject.instances.push(PROJECT_VERSION);\n    assertSingleInstance();\n}\nfunction assertWarning(condition, errorMessage, { onlyOnce, showStackTrace }) {\n    const globalObject = getGlobalObjectSafe();\n    if (condition) {\n        return;\n    }\n    const msg = `[Vike][Warning] ${errorMessage}`;\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = onlyOnce === true ? msg : onlyOnce;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    if (showStackTrace) {\n        console.warn(new Error(msg));\n    }\n    else {\n        console.warn(msg);\n    }\n}\n","export function isNodeJS() {\n    if (typeof process === 'undefined')\n        return false;\n    if (!process.cwd)\n        return false;\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#35813135\n    if (!process.versions || typeof process.versions.node === 'undefined')\n        return false;\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#comment92529277_35813135\n    if (!process.release || process.release.name !== 'node')\n        return false;\n    return true;\n}\n","export { createErrorWithCleanStackTrace };\nimport { isNodeJS } from './isNodeJS.js';\nfunction createErrorWithCleanStackTrace(errorMessage, numberOfStackTraceLinesToRemove) {\n    const err = new Error(errorMessage);\n    if (isNodeJS()) {\n        err.stack = clean(err.stack, numberOfStackTraceLinesToRemove);\n    }\n    return err;\n}\nfunction clean(errStack, numberOfStackTraceLinesToRemove) {\n    if (!errStack) {\n        return errStack;\n    }\n    const stackLines = splitByLine(errStack);\n    let linesRemoved = 0;\n    const stackLine__cleaned = stackLines\n        .filter((line) => {\n        // Remove internal stack traces\n        if (line.includes(' (internal/') || line.includes(' (node:internal')) {\n            return false;\n        }\n        if (linesRemoved < numberOfStackTraceLinesToRemove && isStackTraceLine(line)) {\n            linesRemoved++;\n            return false;\n        }\n        return true;\n    })\n        .join('\\n');\n    return stackLine__cleaned;\n}\nfunction isStackTraceLine(line) {\n    return line.startsWith('    at ');\n}\nfunction splitByLine(str) {\n    // https://stackoverflow.com/questions/21895233/how-in-node-to-split-string-by-newline-n\n    return str.split(/\\r?\\n/);\n}\n","export function isObject(value) {\n    return typeof value === 'object' && value !== null;\n}\n","export { assert };\nexport { assertUsage };\nexport { assertWarning };\nexport { assertInfo };\nexport { getProjectError };\nexport { addOnBeforeLogHook };\nexport { getAssertErrMsg };\nexport { overwriteAssertProductionLogger };\nexport { isBug };\nexport { setAlwaysShowStackTrace };\nimport { assertSingleInstance_onAssertModuleLoad } from './assertSingleInstance.js';\nimport { createErrorWithCleanStackTrace } from './createErrorWithCleanStackTrace.js';\nimport { getGlobalObject } from './getGlobalObject.js';\nimport { isObject } from './isObject.js';\nimport { PROJECT_VERSION } from './PROJECT_VERSION.js';\nimport pc from '@brillout/picocolors';\nconst globalObject = getGlobalObject('utils/assert.ts', {\n    alreadyLogged: new Set(),\n    // Production logger. Overwritten by loggerNotProd.ts in non-production environments.\n    logger(msg, logType) {\n        if (logType === 'info') {\n            console.log(msg);\n        }\n        else {\n            console.warn(msg);\n        }\n    },\n    showStackTraceList: new WeakSet(),\n});\nassertSingleInstance_onAssertModuleLoad();\nconst projectTag = `[vike]`;\nconst projectTagWithVersion = `[vike@${PROJECT_VERSION}]`;\nconst bugTag = 'Bug';\nconst numberOfStackTraceLinesToRemove = 2;\n// @__NO_SIDE_EFFECTS__\nfunction assert(condition, debugInfo) {\n    if (condition)\n        return;\n    const debugStr = (() => {\n        if (!debugInfo) {\n            return null;\n        }\n        const debugInfoSerialized = typeof debugInfo === 'string' ? debugInfo : JSON.stringify(debugInfo);\n        return pc.dim(`Debug info for Vike maintainers (you can ignore this): ${debugInfoSerialized}`);\n    })();\n    const link = pc.underline('https://github.com/vikejs/vike/issues/new?template=bug.yml');\n    let errMsg = [\n        `You stumbled upon a Vike bug. Go to ${link} and copy-paste this error. A maintainer will fix the bug (usually within 24 hours).`,\n        debugStr,\n    ]\n        .filter(Boolean)\n        .join(' ');\n    errMsg = addWhitespace(errMsg);\n    errMsg = addPrefixAssertType(errMsg, bugTag);\n    errMsg = addPrefixProjectName(errMsg, true);\n    const internalError = createErrorWithCleanStackTrace(errMsg, numberOfStackTraceLinesToRemove);\n    globalObject.onBeforeLog?.();\n    throw internalError;\n}\nfunction assertUsage(condition, errMsg, { showStackTrace, exitOnError } = {}) {\n    if (condition)\n        return;\n    showStackTrace = showStackTrace || globalObject.alwaysShowStackTrace;\n    errMsg = addWhitespace(errMsg);\n    errMsg = addPrefixAssertType(errMsg, 'Wrong Usage');\n    errMsg = addPrefixProjectName(errMsg);\n    const usageError = createErrorWithCleanStackTrace(errMsg, numberOfStackTraceLinesToRemove);\n    if (showStackTrace) {\n        globalObject.showStackTraceList.add(usageError);\n    }\n    globalObject.onBeforeLog?.();\n    if (!exitOnError) {\n        throw usageError;\n    }\n    else {\n        console.error(showStackTrace ? usageError : errMsg);\n        process.exit(1);\n    }\n}\nfunction getProjectError(errMsg) {\n    errMsg = addWhitespace(errMsg);\n    errMsg = addPrefixAssertType(errMsg, 'Error');\n    errMsg = addPrefixProjectName(errMsg);\n    const projectError = createErrorWithCleanStackTrace(errMsg, numberOfStackTraceLinesToRemove);\n    return projectError;\n}\nfunction assertWarning(condition, msg, { onlyOnce, showStackTrace }) {\n    if (condition)\n        return;\n    showStackTrace = showStackTrace || globalObject.alwaysShowStackTrace;\n    msg = addWhitespace(msg);\n    msg = addPrefixAssertType(msg, 'Warning');\n    msg = addPrefixProjectName(msg);\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = onlyOnce === true ? msg : onlyOnce;\n        if (alreadyLogged.has(key))\n            return;\n        alreadyLogged.add(key);\n    }\n    globalObject.onBeforeLog?.();\n    if (showStackTrace) {\n        const err = createErrorWithCleanStackTrace(msg, numberOfStackTraceLinesToRemove);\n        globalObject.showStackTraceList.add(err);\n        globalObject.logger(err, 'warn');\n    }\n    else {\n        globalObject.logger(msg, 'warn');\n    }\n}\nfunction assertInfo(condition, msg, { onlyOnce }) {\n    if (condition) {\n        return;\n    }\n    msg = addWhitespace(msg);\n    msg = addPrefixProjectName(msg);\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = msg;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    globalObject.onBeforeLog?.();\n    globalObject.logger(msg, 'info');\n}\nfunction addOnBeforeLogHook(onBeforeLog) {\n    globalObject.onBeforeLog = onBeforeLog;\n}\nfunction addPrefixAssertType(msg, tag) {\n    let prefix = `[${tag}]`;\n    const color = tag === 'Warning' ? 'yellow' : 'red';\n    prefix = pc.bold(pc[color](prefix));\n    return `${prefix}${msg}`;\n}\nfunction addWhitespace(msg) {\n    if (msg.startsWith('[')) {\n        return msg;\n    }\n    else {\n        return ` ${msg}`;\n    }\n}\nfunction addPrefixProjectName(msg, showProjectVersion = false) {\n    const prefix = showProjectVersion ? projectTagWithVersion : projectTag;\n    return `${prefix}${msg}`;\n}\n// TO-DO/eventually: remove this (refactor the whole log handling)\nfunction getAssertErrMsg(thing) {\n    let errMsg;\n    let errStack;\n    if (typeof thing === 'string') {\n        errMsg = thing;\n    }\n    else if (isObject(thing) && typeof thing.message === 'string' && typeof thing.stack === 'string') {\n        errMsg = thing.message;\n        errStack = thing.stack;\n    }\n    else {\n        return null;\n    }\n    for (const tag of [projectTagWithVersion, projectTag]) {\n        const showVikeVersion = tag === projectTagWithVersion;\n        const errStackPrefix = `Error: ${tag}`;\n        if (errStack?.startsWith(errStackPrefix)) {\n            if (globalObject.showStackTraceList.has(thing) || isBug(thing)) {\n                const assertMsg = errStack.slice(errStackPrefix.length);\n                return { assertMsg, showVikeVersion };\n            }\n        }\n        else if (errStack?.includes(tag)) {\n            // The following assert can fail, e.g. with following error:\n            // ```\n            // Error: Error running module \"/home/rom/code/vike-server/examples/cloudflare-react/cloudflare-entry.js\".\n            // Error running module \"photon:cloudflare:/home/rom/code/vike-server/examples/cloudflare-react/server.js\".\n            // Error running module \"/home/rom/code/vike-server/examples/cloudflare-react/server.js\".\n            // Error running module \"/home/rom/code/vike-server/node_modules/.pnpm/@photonjs+hono@0.0.6_@hattip+core@0.0.49_elysia@1.3.13_exact-mirror@0.1.6_@sinclair+typ_c39d432d43266746f390ace81b426601/node_modules/@photonjs/hono/dist/index.js?v=6ca51a04\".\n            // Error running module \"/home/rom/code/vike-server/node_modules/.pnpm/@photonjs+hono@0.0.6_@hattip+core@0.0.49_elysia@1.3.13_exact-mirror@0.1.6_@sinclair+typ_c39d432d43266746f390ace81b426601/node_modules/@photonjs/hono/dist/apply.dev.js?v=6ca51a04\".\n            // Error running module \"photon:get-middlewares:dev:hono\".\n            // Error running module \"/home/rom/code/vike-server/packages/vike-server/dist/universal.dev.js\".\n            // [vike][Wrong Usage] The global context isn't set yet, use getGlobalContextAsync() instead........\n            //     at async ProxyServer.fetch (file:///home/rom/code/vike-server/node_modules/.pnpm/miniflare@4.20250829.0/node_modules/miniflare/src/workers/core/proxy.worker.ts:174:11)\n            // ```\n            /*\n            throw new Error('Internal Vike error')\n            */\n        }\n        if (errMsg?.startsWith(tag)) {\n            const assertMsg = errMsg.slice(tag.length);\n            return { assertMsg, showVikeVersion };\n        }\n    }\n    return null;\n}\nfunction overwriteAssertProductionLogger(logger) {\n    globalObject.logger = logger;\n}\nfunction isBug(err) {\n    return String(err).includes(`[${bugTag}]`);\n}\n// Called upon `DEBUG=vike:error`\nfunction setAlwaysShowStackTrace() {\n    globalObject.alwaysShowStackTrace = true;\n}\n","export { humanizeTime };\nfunction humanizeTime(milliseconds) {\n    const seconds = milliseconds / 1000;\n    if (seconds < 120) {\n        const n = round(seconds);\n        return `${n} second${plural(n)}`;\n    }\n    {\n        const minutes = seconds / 60;\n        const n = round(minutes);\n        return `${n} minute${plural(n)}`;\n    }\n}\nfunction round(n) {\n    let rounded = n.toFixed(1);\n    if (rounded.endsWith('.0'))\n        rounded = rounded.slice(0, -2);\n    return rounded;\n}\nfunction plural(n) {\n    return n === '1' ? '' : 's';\n}\n","export function isCallable(thing) {\n    return thing instanceof Function || typeof thing === 'function';\n}\n","// Same as Array.isArray() but typesafe: asserts unknown[] instead of any[]\nexport function isArray(value) {\n    return Array.isArray(value);\n}\n","export { getPageConfig };\nexport { getConfigValueFilePathToShowToUser };\nexport { getHookFilePathToShowToUser };\nimport { assert, isArray } from '../utils.js';\nfunction getPageConfig(pageId, pageConfigs) {\n    const pageConfig = pageConfigs.find((p) => p.pageId === pageId);\n    assert(pageConfigs.length > 0);\n    assert(pageConfig);\n    return pageConfig;\n}\nfunction getConfigValueFilePathToShowToUser(definedAtData) {\n    // A unique file path only exists if the config value isn't cumulative nor computed:\n    //  - cumulative config values have multiple file paths\n    //  - computed values don't have any file path\n    if (!definedAtData || isArray(definedAtData) || definedAtData.definedBy)\n        return null;\n    const { filePathToShowToUser } = definedAtData;\n    assert(filePathToShowToUser);\n    return filePathToShowToUser;\n}\nfunction getHookFilePathToShowToUser(definedAtData) {\n    const filePathToShowToUser = getConfigValueFilePathToShowToUser(definedAtData);\n    assert(filePathToShowToUser);\n    return filePathToShowToUser;\n}\n","export { getHookFromPageContext };\nexport { getHookFromPageContextNew };\nexport { getHookFromPageConfig };\nexport { getHookFromPageConfigGlobal };\nexport { getHookFromPageConfigGlobalCumulative };\nexport { getHook_setIsPrerenderering };\n// TO-DO/next-major-release: remove\n// We export for old V0.4 design which doesn't support config.hooksTimeout\nexport { getHookTimeoutDefault };\nimport { getGlobalObject } from '../../utils/getGlobalObject.js';\nimport { getHookFilePathToShowToUser } from '../page-configs/helpers.js';\nimport { getConfigValueRuntime } from '../page-configs/getConfigValueRuntime.js';\nimport { assert, assertUsage, checkType, isArray, isCallable, isObject } from '../utils.js';\nimport pc from '@brillout/picocolors';\nconst globalObject = getGlobalObject('hooks/getHook.ts', {});\nfunction getHookFromPageContext(pageContext, hookName) {\n    if (!(hookName in pageContext.exports)) {\n        return null;\n    }\n    const { hooksTimeout } = pageContext.config;\n    const hookTimeout = getHookTimeout(hooksTimeout, hookName);\n    const hookFn = pageContext.exports[hookName];\n    if (hookFn === null)\n        return null;\n    // TO-DO/eventually: use pageContext.configEntries in favor of pageContext.exportsAll once V0.4 is removed\n    const file = pageContext.exportsAll[hookName][0];\n    assert(file.exportValue === hookFn);\n    const hookFilePath = file.filePath;\n    assert(hookFilePath);\n    return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n}\n// TO-DO/eventually: remove getHookFromPageContext() in favor of getHookFromPageContextNew()\nfunction getHookFromPageContextNew(hookName, pageContext) {\n    const { hooksTimeout } = pageContext.config;\n    const hookTimeout = getHookTimeout(hooksTimeout, hookName);\n    const hooks = [];\n    /* TO-DO/eventually: use pageContext.configEntries in favor of pageContext.exportsAll once V0.4 is removed\n    pageContext.configEntries[hookName]?.forEach((val) => {\n      const hookFn = val.configValue\n      if (hookFn === null) return\n      const hookFilePath = val.configDefinedByFile\n    */\n    pageContext.exportsAll[hookName]?.forEach((val) => {\n        const hookFn = val.exportValue;\n        if (hookFn === null)\n            return;\n        const hookFilePath = val.filePath;\n        assert(hookFilePath);\n        hooks.push(getHook(hookFn, hookName, hookFilePath, hookTimeout));\n    });\n    return hooks;\n}\nfunction getHookFromPageConfig(pageConfig, hookName) {\n    const configValue = getConfigValueRuntime(pageConfig, hookName);\n    if (!configValue?.value)\n        return null;\n    const { hookFn, hookFilePath } = getHookFromConfigValue(configValue);\n    const hooksTimeout = getConfigValueRuntime(pageConfig, 'hooksTimeout')?.value;\n    const hookTimeout = getHookTimeout(hooksTimeout, hookName);\n    return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n}\nfunction getHookFromPageConfigGlobal(pageConfigGlobal, hookName) {\n    const configValue = pageConfigGlobal.configValues[hookName];\n    if (!configValue?.value)\n        return null;\n    const { hookFn, hookFilePath } = getHookFromConfigValue(configValue);\n    const hookTimeout = getHookTimeoutGlobal(hookName);\n    return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n}\nfunction getHookFromPageConfigGlobalCumulative(pageConfigGlobal, hookName) {\n    const configValue = pageConfigGlobal.configValues[hookName];\n    if (!configValue?.value)\n        return [];\n    const val = configValue.value;\n    assert(isArray(val));\n    return val.map((v, i) => {\n        const hookFn = v;\n        const hookTimeout = getHookTimeoutGlobal(hookName);\n        assert(isArray(configValue.definedAtData));\n        const hookFilePath = getHookFilePathToShowToUser(configValue.definedAtData[i]);\n        return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n    });\n}\nfunction getHookTimeoutGlobal(hookName) {\n    // TO-DO/perfection: we could use the global value of configooksTimeout but it requires some non-trivial refactoring\n    const hookTimeout = getHookTimeoutDefault(hookName);\n    return hookTimeout;\n}\nfunction getHook(hookFn, hookName, hookFilePath, hookTimeout) {\n    assert(hookFilePath);\n    assertHookFn(hookFn, { hookName, hookFilePath });\n    const hook = { hookFn, hookName, hookFilePath, hookTimeout };\n    return hook;\n}\nfunction getHookFromConfigValue(configValue) {\n    const hookFn = configValue.value;\n    assert(hookFn);\n    const hookFilePath = getHookFilePathToShowToUser(configValue.definedAtData);\n    return { hookFn, hookFilePath };\n}\nfunction assertHookFn(hookFn, { hookName, hookFilePath }) {\n    assert(hookName && hookFilePath);\n    assert(!hookName.endsWith(')'));\n    assert(!hookFilePath.endsWith(' '));\n    assertUsage(isCallable(hookFn), `Hook ${hookName}() defined by ${hookFilePath} should be a function`);\n    checkType(hookFn);\n}\nfunction getHookTimeout(hooksTimeoutProvidedByUser, hookName) {\n    const hooksTimeoutProvidedbyUserNormalized = getHooksTimeoutProvidedByUserNormalized(hooksTimeoutProvidedByUser);\n    if (hooksTimeoutProvidedbyUserNormalized === false)\n        return { error: false, warning: false };\n    const providedbyUser = hooksTimeoutProvidedbyUserNormalized[hookName];\n    const hookTimeout = getHookTimeoutDefault(hookName);\n    if (providedbyUser?.error !== undefined)\n        hookTimeout.error = providedbyUser.error;\n    if (providedbyUser?.warning !== undefined)\n        hookTimeout.warning = providedbyUser.warning;\n    return hookTimeout;\n}\n// Ideally this should be called only once and at build-time (to avoid bloating the client-side bundle), but we didn't implement any mechanism to valid config values at build-time yet\nfunction getHooksTimeoutProvidedByUserNormalized(hooksTimeoutProvidedByUser) {\n    if (hooksTimeoutProvidedByUser === undefined)\n        return {};\n    if (hooksTimeoutProvidedByUser === false)\n        return false;\n    assertUsage(isObject(hooksTimeoutProvidedByUser), `Setting ${pc.cyan('hooksTimeout')} should be ${pc.cyan('false')} or an object`);\n    const hooksTimeoutProvidedByUserNormalized = {};\n    Object.entries(hooksTimeoutProvidedByUser).forEach(([hookName, hookTimeoutProvidedbyUser]) => {\n        if (hookTimeoutProvidedbyUser === false) {\n            hooksTimeoutProvidedByUserNormalized[hookName] = { error: false, warning: false };\n            return;\n        }\n        assertUsage(isObject(hookTimeoutProvidedbyUser), `Setting ${pc.cyan(`hooksTimeout.${hookName}`)} should be ${pc.cyan('false')} or an object`);\n        const [error, warning] = ['error', 'warning'].map((timeoutName) => {\n            const timeoutVal = hookTimeoutProvidedbyUser[timeoutName];\n            if (timeoutVal === undefined || timeoutVal === false)\n                return timeoutVal;\n            const errPrefix = `Setting ${pc.cyan(`hooksTimeout.${hookName}.${timeoutName}`)} should be`;\n            assertUsage(typeof timeoutVal === 'number', `${errPrefix} ${pc.cyan('false')} or a number`);\n            assertUsage(timeoutVal > 0, `${errPrefix} a positive number`);\n            return timeoutVal;\n        });\n        hooksTimeoutProvidedByUserNormalized[hookName] = { error, warning };\n    });\n    return hooksTimeoutProvidedByUserNormalized;\n}\nfunction getHookTimeoutDefault(hookName) {\n    if (hookName === 'onBeforeRoute') {\n        return {\n            error: 5 * 1000,\n            warning: 1 * 1000,\n        };\n    }\n    if (globalObject.isPrerendering) {\n        return {\n            error: 2 * 60 * 1000,\n            warning: 30 * 1000,\n        };\n    }\n    else {\n        assert(!hookName.toLowerCase().includes('prerender'));\n    }\n    return {\n        error: 30 * 1000,\n        warning: 4 * 1000,\n    };\n}\nfunction getHook_setIsPrerenderering() {\n    globalObject.isPrerendering = true;\n}\n","export { execHook };\nexport { execHookGlobal };\nexport { execHookDirect };\nexport { execHookDirectSingle };\nexport { execHookDirectSingleWithReturn };\nexport { execHookDirectWithoutPageContext };\nexport { execHookDirectSync };\nexport { getPageContext };\nexport { providePageContext };\nexport { isUserHookError };\nimport { getProjectError, assertWarning, assertUsage } from '../../utils/assert.js';\nimport { getGlobalObject } from '../../utils/getGlobalObject.js';\nimport { humanizeTime } from '../../utils/humanizeTime.js';\nimport { isObject } from '../../utils/isObject.js';\nimport { getHookFromPageConfigGlobalCumulative, getHookFromPageContextNew } from './getHook.js';\nimport { preparePageContextForPublicUsage, } from '../preparePageContextForPublicUsage.js';\nconst globalObject = getGlobalObject('utils/execHook.ts', {\n    userHookErrors: new WeakMap(),\n    pageContext: null,\n});\nasync function execHook(hookName, pageContext, preparePageContextForPublicUsage) {\n    const hooks = getHookFromPageContextNew(hookName, pageContext);\n    return await execHookDirect(hooks, pageContext, preparePageContextForPublicUsage);\n}\nasync function execHookGlobal(hookName, pageConfigGlobal, pageContext, hookArg, prepareForPublicUsage) {\n    const hooks = getHookFromPageConfigGlobalCumulative(pageConfigGlobal, hookName);\n    const hookArgForPublicUsage = prepareForPublicUsage(hookArg);\n    await Promise.all(hooks.map(async (hook) => {\n        await execHookDirectAsync(() => hook.hookFn(hookArgForPublicUsage), hook, pageContext);\n    }));\n}\nasync function execHookDirect(hooks, pageContext, preparePageContextForPublicUsage) {\n    if (!hooks.length)\n        return [];\n    const pageContextForPublicUsage = preparePageContextForPublicUsage(pageContext);\n    const hooksWithResult = await Promise.all(hooks.map(async (hook) => {\n        const hookReturn = await execHookDirectAsync(() => hook.hookFn(pageContextForPublicUsage), hook, pageContextForPublicUsage);\n        return { ...hook, hookReturn };\n    }));\n    return hooksWithResult;\n}\nasync function execHookDirectSingle(hook, pageContext, preparePageContextForPublicUsage) {\n    const hooksWithResult = await execHookDirect([hook], pageContext, preparePageContextForPublicUsage);\n    const { hookReturn } = hooksWithResult[0];\n    assertUsage(hookReturn === undefined, `The ${hook.hookName}() hook defined by ${hook.hookFilePath} isn't allowed to return a value`);\n}\nasync function execHookDirectSingleWithReturn(hook, pageContext, preparePageContextForPublicUsage) {\n    const hooksWithResult = await execHookDirect([hook], pageContext, preparePageContextForPublicUsage);\n    const { hookReturn } = hooksWithResult[0];\n    return { hookReturn };\n}\nfunction isUserHookError(err) {\n    if (!isObject(err))\n        return false;\n    return globalObject.userHookErrors.get(err) ?? false;\n}\nasync function execHookDirectWithoutPageContext(hookFnCaller, hook) {\n    const { hookName, hookFilePath, hookTimeout } = hook;\n    const hookReturn = await execHookDirectAsync(hookFnCaller, { hookName, hookFilePath, hookTimeout }, null);\n    return hookReturn;\n}\nfunction execHookDirectAsync(hookFnCaller, hook, pageContextForPublicUsage) {\n    const { hookName, hookFilePath, hookTimeout: { error: timeoutErr, warning: timeoutWarn }, } = hook;\n    let resolve;\n    let reject;\n    const promise = new Promise((resolve_, reject_) => {\n        resolve = (ret) => {\n            clearTimeouts();\n            resolve_(ret);\n        };\n        reject = (err) => {\n            clearTimeouts();\n            reject_(err);\n        };\n    });\n    const clearTimeouts = () => {\n        if (currentTimeoutWarn)\n            clearTimeout(currentTimeoutWarn);\n        if (currentTimeoutErr)\n            clearTimeout(currentTimeoutErr);\n    };\n    const currentTimeoutWarn = isNotDisabled(timeoutWarn) &&\n        setTimeout(() => {\n            assertWarning(false, `The ${hookName}() hook defined by ${hookFilePath} is slow: it's taking more than ${humanizeTime(timeoutWarn)} (https://vike.dev/hooksTimeout)`, { onlyOnce: false });\n        }, timeoutWarn);\n    const currentTimeoutErr = isNotDisabled(timeoutErr) &&\n        setTimeout(() => {\n            const err = getProjectError(`The ${hookName}() hook defined by ${hookFilePath} timed out: it didn't finish after ${humanizeTime(timeoutErr)} (https://vike.dev/hooksTimeout)`);\n            reject(err);\n        }, timeoutErr);\n    (async () => {\n        try {\n            providePageContextInternal(pageContextForPublicUsage);\n            const ret = await hookFnCaller();\n            resolve(ret);\n        }\n        catch (err) {\n            if (isObject(err)) {\n                globalObject.userHookErrors.set(err, { hookName, hookFilePath });\n            }\n            reject(err);\n        }\n    })();\n    return promise;\n}\nfunction execHookDirectSync(hook, pageContext, preparePageContextForPublicUsage) {\n    const pageContextForPublicUsage = preparePageContextForPublicUsage(pageContext);\n    providePageContextInternal(pageContextForPublicUsage);\n    const hookReturn = hook.hookFn(pageContextForPublicUsage);\n    return { hookReturn };\n}\nfunction isNotDisabled(timeout) {\n    return !!timeout && timeout !== Infinity;\n}\n/**\n * Access `pageContext` object inside Vike hooks, in order to create universal hooks.\n *\n * https://vike.dev/getPageContext\n */\nfunction getPageContext() {\n    const { pageContext } = globalObject;\n    if (!pageContext)\n        return null;\n    const pageContextForPublicUsage = pageContext._isProxyObject\n        ? // providePageContext() is called on the user-land (e.g. it's called by `vike-{react,vue,solid}`) thus it's already a proxy\n            pageContext\n        : preparePageContextForPublicUsage(pageContext);\n    return pageContextForPublicUsage;\n}\n/**\n * Provide `pageContext` for universal hooks.\n *\n * https://vike.dev/getPageContext\n */\nfunction providePageContext(pageContext) {\n    providePageContextInternal(pageContext);\n}\nfunction providePageContextInternal(pageContext) {\n    globalObject.pageContext = pageContext;\n    // Promise.resolve() is quicker than process.nextTick() and setImmediate()\n    // https://stackoverflow.com/questions/67949576/process-nexttick-before-promise-resolve-then\n    Promise.resolve().then(() => {\n        globalObject.pageContext = null;\n    });\n}\n"],"names":["unique","arr","getGlobalObject","moduleId","defaultValue","globals","getGlobals","_a","pc","_","p","s","PROJECT_VERSION","globalObject","genGlobalConfig","getGlobalObjectSafe","clientRuntimesClonflict","clientNotSingleInstance","assertSingleInstance","versions","assertWarning","assertSingleInstance_onClientEntryClientRouting","isProduction","assertSingleInstance_onAssertModuleLoad","condition","errorMessage","onlyOnce","showStackTrace","msg","alreadyLogged","key","isNodeJS","createErrorWithCleanStackTrace","numberOfStackTraceLinesToRemove","err","clean","errStack","stackLines","splitByLine","linesRemoved","line","isStackTraceLine","str","isObject","value","logType","projectTag","projectTagWithVersion","bugTag","assert","debugInfo","debugStr","debugInfoSerialized","errMsg","addWhitespace","addPrefixAssertType","addPrefixProjectName","internalError","assertUsage","exitOnError","usageError","getProjectError","assertInfo","tag","prefix","color","showProjectVersion","humanizeTime","milliseconds","seconds","n","round","plural","minutes","rounded","isCallable","thing","isArray","getPageConfig","pageId","pageConfigs","pageConfig","getConfigValueFilePathToShowToUser","definedAtData","filePathToShowToUser","getHookFilePathToShowToUser","getHookFromPageContext","pageContext","hookName","hooksTimeout","hookTimeout","getHookTimeout","hookFn","file","hookFilePath","getHook","getHookFromPageContextNew","hooks","val","getHookFromPageConfigGlobal","pageConfigGlobal","configValue","getHookFromConfigValue","getHookTimeoutGlobal","getHookFromPageConfigGlobalCumulative","v","getHookTimeoutDefault","assertHookFn","hooksTimeoutProvidedByUser","hooksTimeoutProvidedbyUserNormalized","getHooksTimeoutProvidedByUserNormalized","providedbyUser","hooksTimeoutProvidedByUserNormalized","hookTimeoutProvidedbyUser","error","warning","timeoutName","timeoutVal","errPrefix","execHook","preparePageContextForPublicUsage","execHookDirect","execHookGlobal","hookArg","prepareForPublicUsage","hookArgForPublicUsage","hook","execHookDirectAsync","pageContextForPublicUsage","hookReturn","execHookDirectSingle","hooksWithResult","hookFnCaller","timeoutErr","timeoutWarn","resolve","reject","promise","resolve_","reject_","ret","clearTimeouts","currentTimeoutWarn","currentTimeoutErr","isNotDisabled","providePageContextInternal","execHookDirectSync","timeout","providePageContext"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}